/*! myapp 2016-06-14 */
var myApp=angular.module("myApp",["ui.router"]);myApp.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c,d){b.otherwise("/"),a.state("login",{url:"/",templateUrl:"/views/pages/login.html",controller:"mainController",data:{pageTitle:"MyApp - Login"}}).state("dashboard",{url:"/dashboard",templateUrl:"/views/dashboard.html",controller:"dashboardController",data:{pageTitle:"MyApp - New Dashboard"}}).state("deputados",{url:"/deputados",templateUrl:"/views/deputados.html",controller:"deputadosController",data:{pageTitle:"MyApp - Deputados"}}),c.html5Mode(!0)}]),myApp.controller("deputadosController",["$scope","$rootScope","requestFactory","$http","config",function(a,b,c,d,e){!function(){c.getRequestAjax("GET","/api/politicos/","","getPoliticos"),b.$on("getPoliticos",function(b,c,d){a.politiciansList=c,console.log(a.politiciansList)})}(),a.selectedIndex=void 0,a.fetchDeputados=function(d,e){a.selectedIndex=e;var f=d.votos;void 0===f&&(f=0);var g=f+1;d.votos=g;var h=d._id;!function(){c.getRequestAjax("PUT","/api/politicos/"+h,d,"insertVotes"),b.$on("insertVotes",function(a,b,c){console.log(b)})}()}}]),myApp.controller("mainController",["$scope","$rootScope","requestFactory",function(a,b,c){var d=function(){!function(){c.getRequestAjax("GET","/api/contatos","","refresh"),b.$on("refresh",function(b,c,d){a.contatos=c,a.formContato={}})}()};d(),a.criarContato=function(){!function(){c.getRequestAjax("POST","/api/contatos",a.formContato,"createContacts"),b.$on("createContacts",function(b,c,d){a.formContato={},a.contatos=c})}()},a.deletarContato=function(d){!function(){c.getRequestAjax("DELETE","/api/contatos/"+d,"","deleteContacts"),b.$on("deleteContacts",function(b,c,d){a.contatos=c})}()},a.editarContato=function(d){!function(){c.getRequestAjax("GET","/api/contatos/"+d,"","editContacts"),b.$on("editContacts",function(b,c,d){a.formContato=c})}()},a.atualizarContato=function(){!function(){c.getRequestAjax("PUT","/api/contatos/"+a.formContato._id,a.formContato,"updateContacts"),b.$on("updateContacts",function(a,b,c){d()})}()}}]),myApp.directive("title",["$rootScope","$timeout",function(a,b){return{link:function(){var c=function(c,d){b(function(){a.title=d.data&&d.data.pageTitle?d.data.pageTitle:"Lighthouse"})};a.$on("$stateChangeSuccess",c)}}}]),myApp.factory("requestFactory",["$rootScope","$http","config",function(a,b,c){var d={};return d.getRequestAjax=function(d,e,f,g){return b({method:d,url:c.baseUrl+e,data:f}).success(function(b,c){a.$emit(g,b,c)}).error(function(a){console.log("Error in: "+a.message)})},d}]),myApp.value("config",{baseUrl:"http://localhost:8080"});