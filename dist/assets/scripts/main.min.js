/*! myapp 2016-06-24 */
var myApp=angular.module("myApp",["ui.router","satellizer"]).config(["$authProvider",function(a){a.httpInterceptor=function(){return!0},a.withCredentials=!0,a.tokenRoot=null,a.cordova=!1,a.baseUrl="http://localhost:8080/",a.loginUrl="/auth/authenticate",a.signupUrl="/auth/signup",a.tokenName="token",a.tokenPrefix="satellizer",a.authHeader="Authorization",a.authToken="Bearer",a.storageType="localStorage"}]);myApp.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c,d){b.otherwise("/"),a.state("login",{url:"/login",templateUrl:"/views/login.html",controller:"loginController",data:{pageTitle:"MyApp - Login"}}).state("signup",{url:"/signup",templateUrl:"/views/signup.html",controller:"signupController",data:{pageTitle:"MyApp - Signup"}}).state("dashboard",{url:"/dashboard",templateUrl:"/views/dashboard.html",controller:"dashboardController",data:{pageTitle:"MyApp - New Dashboard"}}).state("deputados",{url:"/deputados",templateUrl:"/views/deputados.html",controller:"deputadosController",data:{pageTitle:"MyApp - Deputados"}}),c.html5Mode(!0)}]),myApp.controller("deputadosController",["$scope","$rootScope","requestFactory","$http","config",function(a,b,c,d,e){!function(){c.getRequestAjax("GET","/api/politicos/","","getPoliticos"),b.$on("getPoliticos",function(b,c,d){a.politiciansList=c})}(),a.selectedIndex=void 0,a.fetchDeputados=function(d,e){a.selectedIndex=e;var f=d.votos;void 0===f&&(f=0);var g=f+1;d.votos=g;var h=d._id;!function(){c.getRequestAjax("PUT","/api/politicos/"+h,d,"insertVotes"),b.$on("insertVotes",function(a,b,c){})}()}}]),myApp.controller("loginController",["$scope","$rootScope","requestFactory","$auth","$window","$state",function(a,b,c,d,e,f){a.login=function(a){d.login(a).then(function(a){200===a.data.statusLogin?f.go("deputados",{redirect:!0}):404===a.data.statusLogin?alert("Usuário ou senha incorretos!"):500===a.data.statusLogin&&alert("Erro ao tentar realizar o login, tente novamente mais tarde!")})["catch"](function(a){console.log(a)})},a.isAuthenticated=function(){return d.isAuthenticated()}}]),myApp.controller("mainController",["$scope","$rootScope","requestFactory","$auth","$state",function(a,b,c,d,e){a.logout=function(){d.logout().then(function(){localStorage.removeItem("satellizer_token"),e.go("login",{redirect:!0})})},a.inputTypePassword="password",a.hideShowPassword=function(){"password"==a.inputTypePassword?a.inputTypePassword="text":a.inputTypePassword="password"},a.comparePassword=function(b,c){b===c?a.passwordConfirm=!0:a.passwordConfirm=!1}}]),myApp.controller("signupController",["$scope","$rootScope","requestFactory","$auth","$window","$state",function(a,b,c,d,e,f){a.signup=function(a){d.signup(a).then(function(a){200===a.data.statusSignup?(f.go("login",{redirect:!0}),alert("Cadastro realizado com sucesso, faça seu login abaixo!")):404===a.data.statusSignup?alert("Usuário já existe!"):500===a.data.statusSignup&&alert("Erro ao tentar realizar o seu cadastro, tente novamente mais tarde!")})["catch"](function(a){alert("Erro ao tentar realizar o seu cadastro, tente novamente mais tarde!"),console.log("Error"),console.log(a)})}}]),myApp.directive("title",["$rootScope","$timeout",function(a,b){return{link:function(){var c=function(c,d){b(function(){a.title=d.data&&d.data.pageTitle?d.data.pageTitle:"Lighthouse"})};a.$on("$stateChangeSuccess",c)}}}]),myApp.factory("requestFactory",["$rootScope","$http","config",function(a,b,c){var d={};return d.getRequestAjax=function(d,e,f,g){return b({method:d,url:c.baseUrl+e,data:f}).success(function(b,c){a.$emit(g,b,c)}).error(function(a){console.log("Error in: "+a.message)})},d}]),myApp.value("config",{baseUrl:"http://localhost:8080"});